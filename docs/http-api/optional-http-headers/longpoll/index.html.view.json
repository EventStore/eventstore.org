{"conceptual":"\n<p sourcefile=\"http-api/optional-http-headers/longpoll.md\" sourcestartlinenumber=\"8\" sourceendlinenumber=\"8\">You use the <code>ES-LongPoll</code> header to tell Event Store that when on the head link of a stream and no data is available to wait a period of time to see if data becomes available.</p>\n<p sourcefile=\"http-api/optional-http-headers/longpoll.md\" sourcestartlinenumber=\"10\" sourceendlinenumber=\"10\">You can use this to give lower latency for Atom clients instead of client initiated polling.</p>\n<p sourcefile=\"http-api/optional-http-headers/longpoll.md\" sourcestartlinenumber=\"12\" sourceendlinenumber=\"12\">Instead of the client polling every 5 seconds to get data from the feed the client sends a request with <code>ES-LongPoll: 15</code>. This instructs Event Store to wait for up to 15 seconds before returning with no result. The latency is therefore lowered from the poll interval to about 10ms from the time an event is written until the time the HTTP connection is notified.</p>\n<p sourcefile=\"http-api/optional-http-headers/longpoll.md\" sourcestartlinenumber=\"14\" sourceendlinenumber=\"14\">You can see the use of the <code>ES-LongPoll</code> header in the following cURL command.</p>\n<p sourcefile=\"http-api/optional-http-headers/longpoll.md\" sourcestartlinenumber=\"16\" sourceendlinenumber=\"16\">First go to the head of the stream.</p>\n<div class=\"tabGroup\" id=\"tabgroup_yRctI9fN4R\" sourcefile=\"http-api/optional-http-headers/longpoll.md\" sourcestartlinenumber=\"18\" sourceendlinenumber=\"26\">\n<ul role=\"tablist\">\n<li role=\"presentation\">\n<a href=\"#tabpanel_yRctI9fN4R_tabid-1\" role=\"tab\" aria-controls=\"tabpanel_yRctI9fN4R_tabid-1\" data-tab=\"tabid-1\" tabindex=\"0\" aria-selected=\"true\" sourcefile=\"http-api/optional-http-headers/longpoll.md\" sourcestartlinenumber=\"18\" sourceendlinenumber=\"18\">Request</a>\n</li>\n<li role=\"presentation\">\n<a href=\"#tabpanel_yRctI9fN4R_tabid-2\" role=\"tab\" aria-controls=\"tabpanel_yRctI9fN4R_tabid-2\" data-tab=\"tabid-2\" tabindex=\"-1\" sourcefile=\"http-api/optional-http-headers/longpoll.md\" sourcestartlinenumber=\"22\" sourceendlinenumber=\"22\">Response</a>\n</li>\n</ul>\n<section id=\"tabpanel_yRctI9fN4R_tabid-1\" role=\"tabpanel\" data-tab=\"tabid-1\">\n<pre sourcefile=\"http-api/optional-http-headers/longpoll.md\" sourcestartlinenumber=\"20\" sourceendlinenumber=\"20\"><code class=\"lang-bash\" name=\"http-api-read-stream-request\">curl -i http://127.0.0.1:2113/streams/newstream -H &quot;Accept: application/json&quot;\n</code></pre></section>\n<section id=\"tabpanel_yRctI9fN4R_tabid-2\" role=\"tabpanel\" data-tab=\"tabid-2\" aria-hidden=\"true\" hidden=\"hidden\">\n<pre sourcefile=\"http-api/optional-http-headers/longpoll.md\" sourcestartlinenumber=\"24\" sourceendlinenumber=\"24\"><code class=\"lang-json\" name=\"http-api-read-stream-response\" highlight-lines=\"23-23\">HTTP/1.1 200 OK\nAccess-Control-Allow-Methods: POST, DELETE, GET, OPTIONS\nAccess-Control-Allow-Headers: Content-Type, X-Requested-With, X-Forwarded-Host, X-Forwarded-Prefix, X-PINGOTHER, Authorization, ES-LongPoll, ES-ExpectedVersion, ES-EventId, ES-EventType, ES-RequiresMaster, ES-HardDelete, ES-ResolveLinkTos\nAccess-Control-Allow-Origin: *\nAccess-Control-Expose-Headers: Location, ES-Position, ES-CurrentVersion\nCache-Control: max-age=0, no-cache, must-revalidate\nVary: Accept\nETag: &quot;1;1391431453&quot;\nContent-Type: application/json; charset=utf-8\nServer: Mono-HTTPAPI/1.0\nDate: Mon, 27 Aug 2018 09:37:21 GMT\nContent-Length: 1749\nKeep-Alive: timeout=15,max=100\n\n{\n  &quot;title&quot;: &quot;Event stream &#39;newstream&#39;&quot;,\n  &quot;id&quot;: &quot;http://127.0.0.1:2113/streams/newstream&quot;,\n  &quot;updated&quot;: &quot;2018-08-27T09:21:39.668888Z&quot;,\n  &quot;streamId&quot;: &quot;newstream&quot;,\n  &quot;author&quot;: {\n    &quot;name&quot;: &quot;EventStore&quot;\n  },\n  &quot;headOfStream&quot;: true,\n  &quot;selfUrl&quot;: &quot;http://127.0.0.1:2113/streams/newstream&quot;,\n  &quot;eTag&quot;: &quot;1;-2060438500&quot;,\n  &quot;links&quot;: [\n    {\n      &quot;uri&quot;: &quot;http://127.0.0.1:2113/streams/newstream&quot;,\n      &quot;relation&quot;: &quot;self&quot;\n    },\n    {\n      &quot;uri&quot;: &quot;http://127.0.0.1:2113/streams/newstream/head/backward/20&quot;,\n      &quot;relation&quot;: &quot;first&quot;\n    },\n    {\n      &quot;uri&quot;: &quot;http://127.0.0.1:2113/streams/newstream/2/forward/20&quot;,\n      &quot;relation&quot;: &quot;previous&quot;\n    },\n    {\n      &quot;uri&quot;: &quot;http://127.0.0.1:2113/streams/newstream/metadata&quot;,\n      &quot;relation&quot;: &quot;metadata&quot;\n    }\n  ],\n  &quot;entries&quot;: [\n  &quot;entries&quot;: [\n  ]\n}\n</code></pre></section>\n</div>\n<p sourcefile=\"http-api/optional-http-headers/longpoll.md\" sourcestartlinenumber=\"28\" sourceendlinenumber=\"28\">Then fetch the previous <code>rel</code> link <code>http://127.0.0.1:2113/streams/newstream/2/forward/20</code> and try it. It returns an empty feed.</p>\n<div class=\"tabGroup\" id=\"tabgroup_yRctI9fN4R-1\" sourcefile=\"http-api/optional-http-headers/longpoll.md\" sourcestartlinenumber=\"30\" sourceendlinenumber=\"38\">\n<ul role=\"tablist\">\n<li role=\"presentation\">\n<a href=\"#tabpanel_yRctI9fN4R-1_tabid-3\" role=\"tab\" aria-controls=\"tabpanel_yRctI9fN4R-1_tabid-3\" data-tab=\"tabid-3\" tabindex=\"0\" aria-selected=\"true\" sourcefile=\"http-api/optional-http-headers/longpoll.md\" sourcestartlinenumber=\"30\" sourceendlinenumber=\"30\">Request</a>\n</li>\n<li role=\"presentation\">\n<a href=\"#tabpanel_yRctI9fN4R-1_tabid-4\" role=\"tab\" aria-controls=\"tabpanel_yRctI9fN4R-1_tabid-4\" data-tab=\"tabid-4\" tabindex=\"-1\" sourcefile=\"http-api/optional-http-headers/longpoll.md\" sourcestartlinenumber=\"34\" sourceendlinenumber=\"34\">Response</a>\n</li>\n</ul>\n<section id=\"tabpanel_yRctI9fN4R-1_tabid-3\" role=\"tabpanel\" data-tab=\"tabid-3\">\n<pre sourcefile=\"http-api/optional-http-headers/longpoll.md\" sourcestartlinenumber=\"32\" sourceendlinenumber=\"32\"><code class=\"lang-bash\" name=\"http-api-get-forward-link-request\">curl -i http://127.0.0.1:2113/streams/newstream/2/forward/20 -H &quot;Accept: application/json&quot;\n</code></pre></section>\n<section id=\"tabpanel_yRctI9fN4R-1_tabid-4\" role=\"tabpanel\" data-tab=\"tabid-4\" aria-hidden=\"true\" hidden=\"hidden\">\n<pre sourcefile=\"http-api/optional-http-headers/longpoll.md\" sourcestartlinenumber=\"36\" sourceendlinenumber=\"36\"><code class=\"lang-json\" name=\"http-api-get-forward-link-response\">HTTP/1.1 200 OK\nAccess-Control-Allow-Methods: GET, OPTIONS\nAccess-Control-Allow-Headers: Content-Type, X-Requested-With, X-Forwarded-Host, X-Forwarded-Prefix, X-PINGOTHER, Authorization, ES-LongPoll, ES-ExpectedVersion, ES-EventId, ES-EventType, ES-RequiresMaster, ES-HardDelete, ES-ResolveLinkTos\nAccess-Control-Allow-Origin: *\nAccess-Control-Expose-Headers: Location, ES-Position, ES-CurrentVersion\nCache-Control: max-age=0, no-cache, must-revalidate\nVary: Accept\nETag: &quot;1;1391431453&quot;\nContent-Type: application/json; charset=utf-8\nServer: Mono-HTTPAPI/1.0\nDate: Mon, 27 Aug 2018 09:53:14 GMT\nContent-Length: 786\nKeep-Alive: timeout=15,max=100\n\n{\n  &quot;title&quot;: &quot;Event stream &#39;newstream&#39;&quot;,\n  &quot;id&quot;: &quot;http://127.0.0.1:2113/streams/newstream&quot;,\n  &quot;updated&quot;: &quot;0001-01-01T00:00:00Z&quot;,\n  &quot;streamId&quot;: &quot;newstream&quot;,\n  &quot;author&quot;: {\n    &quot;name&quot;: &quot;EventStore&quot;\n  },\n  &quot;headOfStream&quot;: true,\n  &quot;links&quot;: [\n    {\n      &quot;uri&quot;: &quot;http://127.0.0.1:2113/streams/newstream&quot;,\n      &quot;relation&quot;: &quot;self&quot;\n    },\n    {\n      &quot;uri&quot;: &quot;http://127.0.0.1:2113/streams/newstream/head/backward/20&quot;,\n      &quot;relation&quot;: &quot;first&quot;\n    },\n    {\n      &quot;uri&quot;: &quot;http://127.0.0.1:2113/streams/newstream/0/forward/20&quot;,\n      &quot;relation&quot;: &quot;last&quot;\n    },\n    {\n      &quot;uri&quot;: &quot;http://127.0.0.1:2113/streams/newstream/1/backward/20&quot;,\n      &quot;relation&quot;: &quot;next&quot;\n    },\n    {\n      &quot;uri&quot;: &quot;http://127.0.0.1:2113/streams/newstream/metadata&quot;,\n      &quot;relation&quot;: &quot;metadata&quot;\n    }\n  ],\n  &quot;entries&quot;: []\n}\n</code></pre></section>\n</div>\n<p sourcefile=\"http-api/optional-http-headers/longpoll.md\" sourcestartlinenumber=\"40\" sourceendlinenumber=\"40\">The entries section is empty (there is no further data to provide). Now try the same URI with a long poll header.</p>\n<div class=\"tabGroup\" id=\"tabgroup_yRctI9fN4R-2\" sourcefile=\"http-api/optional-http-headers/longpoll.md\" sourcestartlinenumber=\"42\" sourceendlinenumber=\"46\">\n<ul role=\"tablist\">\n<li role=\"presentation\">\n<a href=\"#tabpanel_yRctI9fN4R-2_tabid-5\" role=\"tab\" aria-controls=\"tabpanel_yRctI9fN4R-2_tabid-5\" data-tab=\"tabid-5\" tabindex=\"0\" aria-selected=\"true\" sourcefile=\"http-api/optional-http-headers/longpoll.md\" sourcestartlinenumber=\"42\" sourceendlinenumber=\"42\">Request</a>\n</li>\n</ul>\n<section id=\"tabpanel_yRctI9fN4R-2_tabid-5\" role=\"tabpanel\" data-tab=\"tabid-5\">\n<pre sourcefile=\"http-api/optional-http-headers/longpoll.md\" sourcestartlinenumber=\"44\" sourceendlinenumber=\"44\"><code class=\"lang-bash\" name=\"http-api-longpoll-request\">curl -i http://127.0.0.1:2113/streams/newstream/2/forward/20 -H &quot;Accept: application/json&quot; -H &quot;ES-LongPoll: 10&quot;\n</code></pre></section>\n</div>\n<p sourcefile=\"http-api/optional-http-headers/longpoll.md\" sourcestartlinenumber=\"48\" sourceendlinenumber=\"48\">If you do not insert any events into the stream while this is running it takes 10 seconds for the HTTP request to finish. If you append an event to the stream while its running you see the result for that request when you append the event.</p>\n","type":"Conceptual","source":{"remote":{"path":"http-api/optional-http-headers/longpoll.md","branch":"feature/stats-REST","repo":"git@github.com:EventStore/docs.geteventstore.com.git"},"startLine":0.0,"endLine":0.0,"isExternal":false},"path":"http-api/optional-http-headers/longpoll.md","documentation":{"remote":{"path":"http-api/optional-http-headers/longpoll.md","branch":"feature/stats-REST","repo":"git@github.com:EventStore/docs.geteventstore.com.git"},"startLine":0.0,"endLine":0.0,"isExternal":false},"_docfxVersion":"2.43.3.0","_disableBreadcrumb":true,"_enableSearch":true,"_gitContribute":{"branch":"master"},"_appFaviconPath":"assets/favicon.ico","_appTitle":"Event Store","_appFooter":"&copy; 2019 Event Store Limited","_disableNavbar":false,"_disableToc":true,"_systemKeys":["conceptual","type","source","path","documentation","title","rawTitle","wordCount"],"title":"Optional HTTP Headers: LongPoll","rawTitle":"<h1 id=\"optional-http-headers-longpoll\" sourcefile=\"http-api/optional-http-headers/longpoll.md\" sourcestartlinenumber=\"6\" sourceendlinenumber=\"6\">Optional HTTP Headers: LongPoll</h1>","outputFileName":"index.html","sinceVersion":"2.1.0","wordCount":451.0,"_lang":"csharp","_tocPath":"toc.html","_navPath":"toc.html","_rel":"../../../","_path":"http-api/optional-http-headers/longpoll/index.html","_key":"http-api/optional-http-headers/longpoll.md","_navRel":"../../../toc.html","_tocRel":"../../../toc.html","_navKey":"~/toc.yml","_tocKey":"~/toc.yml","__global":{"classesInSubtitle":"Classes","structsInSubtitle":"Structs","interfacesInSubtitle":"Interfaces","enumsInSubtitle":"Enums","delegatesInSubtitle":"Delegates","constructorsInSubtitle":"Constructors","fieldsInSubtitle":"Fields","propertiesInSubtitle":"Properties","methodsInSubtitle":"Methods","eventsInSubtitle":"Events","operatorsInSubtitle":"Operators","eiisInSubtitle":"Explicit Interface Implementations","functionsInSubtitle":"Functions","membersInSubtitle":"Members","improveThisDoc":"Improve this Doc","viewSource":"View Source","inheritance":"Inheritance","inheritedMembers":"Inherited Members","namespace":"Namespace","assembly":"Assembly","syntax":"Syntax","overrides":"Overrides","implements":"Implements","remarks":"Remarks","examples":"Examples","seealso":"See Also","declaration":"Declaration","parameters":"Parameters","typeParameters":"Type Parameters","type":"Type","name":"Name","description":"Description","returns":"Returns","fieldValue":"Field Value","propertyValue":"Property Value","eventType":"Event Type","exceptions":"Exceptions","condition":"Condition","extensionMethods":"Extension Methods","note":"<h5>Note</h5>","warning":"<h5>Warning</h5>","tip":"<h5>Tip</h5>","important":"<h5>Important</h5>","caution":"<h5>Caution</h5>","next":"<h5>Next Steps</h5>","_shared":{}},"docurl":"https://github.com/EventStore/docs.geteventstore.com/blob/master/http-api/optional-http-headers/longpoll.md/#L1"}