{"conceptual":"\n<p sourcefile=\"http-api/stream-metadata.md\" sourcestartlinenumber=\"7\" sourceendlinenumber=\"7\">By default streams you create in Event Store have no metadata associated with it. Internally, the metadata includes information such as the ACL of the stream, the maximum count and age for the events in the stream. Client code can also add information into stream metadata for use with projections or the client API.</p>\n<p sourcefile=\"http-api/stream-metadata.md\" sourcestartlinenumber=\"9\" sourceendlinenumber=\"9\">A common use case is to store information associated with an event that is not part of the event.</p>\n<p sourcefile=\"http-api/stream-metadata.md\" sourcestartlinenumber=\"11\" sourceendlinenumber=\"11\">Examples of this are:</p>\n<ul sourcefile=\"http-api/stream-metadata.md\" sourcestartlinenumber=\"13\" sourceendlinenumber=\"15\">\n<li sourcefile=\"http-api/stream-metadata.md\" sourcestartlinenumber=\"13\" sourceendlinenumber=\"13\">Which user wrote the event.</li>\n<li sourcefile=\"http-api/stream-metadata.md\" sourcestartlinenumber=\"14\" sourceendlinenumber=\"14\">Which application server were they talking to.</li>\n<li sourcefile=\"http-api/stream-metadata.md\" sourcestartlinenumber=\"15\" sourceendlinenumber=\"15\">What IP address did the request come from?</li>\n</ul>\n<p sourcefile=\"http-api/stream-metadata.md\" sourcestartlinenumber=\"17\" sourceendlinenumber=\"17\">Stream metadata is stored internally as JSON, and you can access it over the HTTP API.</p>\n<h2 id=\"reading-stream-metadata\" sourcefile=\"http-api/stream-metadata.md\" sourcestartlinenumber=\"19\" sourceendlinenumber=\"19\">Reading Stream Metadata</h2>\n<p sourcefile=\"http-api/stream-metadata.md\" sourcestartlinenumber=\"21\" sourceendlinenumber=\"21\">To read the metadata, issue a <code>GET</code> request to the attached metadata resource, which is typically of the form:</p>\n<pre sourcefile=\"http-api/stream-metadata.md\" sourcestartlinenumber=\"23\" sourceendlinenumber=\"25\"><code class=\"lang-http\">http://{eventstore-ip-address}/streams/{stream-name}/metadata\n</code></pre><p sourcefile=\"http-api/stream-metadata.md\" sourcestartlinenumber=\"27\" sourceendlinenumber=\"27\">You should not access metadata by constructing this URL yourself, as the right to change the resource address is reserved. Instead, you should follow the link from the stream itself, which enables your client to tolerate future changes to the addressing structure.</p>\n<div class=\"tabGroup\" id=\"tabgroup_p0WG6wXVnG\" sourcefile=\"http-api/stream-metadata.md\" sourcestartlinenumber=\"29\" sourceendlinenumber=\"37\">\n<ul role=\"tablist\">\n<li role=\"presentation\">\n<a href=\"#tabpanel_p0WG6wXVnG_tabid-1\" role=\"tab\" aria-controls=\"tabpanel_p0WG6wXVnG_tabid-1\" data-tab=\"tabid-1\" tabindex=\"0\" aria-selected=\"true\" sourcefile=\"http-api/stream-metadata.md\" sourcestartlinenumber=\"29\" sourceendlinenumber=\"29\">Request</a>\n</li>\n<li role=\"presentation\">\n<a href=\"#tabpanel_p0WG6wXVnG_tabid-2\" role=\"tab\" aria-controls=\"tabpanel_p0WG6wXVnG_tabid-2\" data-tab=\"tabid-2\" tabindex=\"-1\" sourcefile=\"http-api/stream-metadata.md\" sourcestartlinenumber=\"33\" sourceendlinenumber=\"33\">Response</a>\n</li>\n</ul>\n<section id=\"tabpanel_p0WG6wXVnG_tabid-1\" role=\"tabpanel\" data-tab=\"tabid-1\">\n<pre sourcefile=\"http-api/stream-metadata.md\" sourcestartlinenumber=\"31\" sourceendlinenumber=\"31\"><code class=\"lang-bash\" name=\"http-api-read-metadata-request\">curl -i -H &quot;Accept:application/vnd.eventstore.atom+json&quot; http://127.0.0.1:2113/streams/%24users --user admin:changeit\n</code></pre></section>\n<section id=\"tabpanel_p0WG6wXVnG_tabid-2\" role=\"tabpanel\" data-tab=\"tabid-2\" aria-hidden=\"true\" hidden=\"hidden\">\n<pre sourcefile=\"http-api/stream-metadata.md\" sourcestartlinenumber=\"35\" sourceendlinenumber=\"35\"><code class=\"lang-json\" name=\"http-api-read-metadata-response\">HTTP/1.1 200 OK\nAccess-Control-Allow-Methods: POST, DELETE, GET, OPTIONS\nAccess-Control-Allow-Headers: Content-Type, X-Requested-With, X-Forwarded-Host, X-Forwarded-Prefix, X-PINGOTHER, Authorization, ES-LongPoll, ES-ExpectedVersion, ES-EventId, ES-EventType, ES-RequiresMaster, ES-HardDelete, ES-ResolveLinkTos\nAccess-Control-Allow-Origin: *\nAccess-Control-Expose-Headers: Location, ES-Position, ES-CurrentVersion\nCache-Control: max-age=0, no-cache, must-revalidate\nVary: Accept\nETag: &quot;3;-2060438500&quot;\nContent-Type: application/vnd.eventstore.atom+json; charset=utf-8\nServer: Mono-HTTPAPI/1.0\nDate: Thu, 23 Aug 2018 10:03:34 GMT\nContent-Length: 2670\nKeep-Alive: timeout=15,max=100\n\n{\n  &quot;title&quot;: &quot;Event stream &#39;$users&#39;&quot;,\n  &quot;id&quot;: &quot;http://127.0.0.1:2113/streams/%24users&quot;,\n  &quot;updated&quot;: &quot;2018-08-23T09:19:37.880827Z&quot;,\n  &quot;streamId&quot;: &quot;$users&quot;,\n  &quot;author&quot;: {\n    &quot;name&quot;: &quot;EventStore&quot;\n  },\n  &quot;headOfStream&quot;: true,\n  &quot;selfUrl&quot;: &quot;http://127.0.0.1:2113/streams/%24users&quot;,\n  &quot;eTag&quot;: &quot;3;-2060438500&quot;,\n  &quot;links&quot;: [\n    {\n      &quot;uri&quot;: &quot;http://127.0.0.1:2113/streams/%24users&quot;,\n      &quot;relation&quot;: &quot;self&quot;\n    },\n    {\n      &quot;uri&quot;: &quot;http://127.0.0.1:2113/streams/%24users/head/backward/20&quot;,\n      &quot;relation&quot;: &quot;first&quot;\n    },\n    {\n      &quot;uri&quot;: &quot;http://127.0.0.1:2113/streams/%24users/4/forward/20&quot;,\n      &quot;relation&quot;: &quot;previous&quot;\n    },\n    {\n      &quot;uri&quot;: &quot;http://127.0.0.1:2113/streams/%24users/metadata&quot;,\n      &quot;relation&quot;: &quot;metadata&quot;\n    }\n  ],\n  &quot;entries&quot;: [\n  ]\n}\n</code></pre></section>\n</div>\n<p sourcefile=\"http-api/stream-metadata.md\" sourcestartlinenumber=\"39\" sourceendlinenumber=\"39\">Once you have the URI of the metadata stream, issue a <code>GET</code> request to retrieve the metadata:</p>\n<div class=\"tabGroup\" id=\"tabgroup_p0WG6wXVnG-1\" sourcefile=\"http-api/stream-metadata.md\" sourcestartlinenumber=\"41\" sourceendlinenumber=\"47\">\n<ul role=\"tablist\">\n<li role=\"presentation\">\n<a href=\"#tabpanel_p0WG6wXVnG-1_tabid-3\" role=\"tab\" aria-controls=\"tabpanel_p0WG6wXVnG-1_tabid-3\" data-tab=\"tabid-3\" tabindex=\"0\" aria-selected=\"true\" sourcefile=\"http-api/stream-metadata.md\" sourcestartlinenumber=\"41\" sourceendlinenumber=\"41\">Request</a>\n</li>\n</ul>\n<section id=\"tabpanel_p0WG6wXVnG-1_tabid-3\" role=\"tabpanel\" data-tab=\"tabid-3\">\n<pre sourcefile=\"http-api/stream-metadata.md\" sourcestartlinenumber=\"43\" sourceendlinenumber=\"45\"><code class=\"lang-bash\">curl -i -H &quot;Accept:application/vnd.eventstore.atom+json&quot; http://127.0.0.1:2113/streams/%24users/metadata --user admin:changeit\n</code></pre></section>\n</div>\n<p sourcefile=\"http-api/stream-metadata.md\" sourcestartlinenumber=\"49\" sourceendlinenumber=\"49\">If you have security enabled, reading metadata may require that you pass credentials, as in the examples above. If credentials are required and you do not pass them, then you receive a &#39;401 Unauthorized&#39; response.</p>\n<div class=\"tabGroup\" id=\"tabgroup_p0WG6wXVnG-2\" sourcefile=\"http-api/stream-metadata.md\" sourcestartlinenumber=\"51\" sourceendlinenumber=\"59\">\n<ul role=\"tablist\">\n<li role=\"presentation\">\n<a href=\"#tabpanel_p0WG6wXVnG-2_tabid-5\" role=\"tab\" aria-controls=\"tabpanel_p0WG6wXVnG-2_tabid-5\" data-tab=\"tabid-5\" tabindex=\"0\" aria-selected=\"true\" sourcefile=\"http-api/stream-metadata.md\" sourcestartlinenumber=\"51\" sourceendlinenumber=\"51\">Request</a>\n</li>\n<li role=\"presentation\">\n<a href=\"#tabpanel_p0WG6wXVnG-2_tabid-6\" role=\"tab\" aria-controls=\"tabpanel_p0WG6wXVnG-2_tabid-6\" data-tab=\"tabid-6\" tabindex=\"-1\" sourcefile=\"http-api/stream-metadata.md\" sourcestartlinenumber=\"55\" sourceendlinenumber=\"55\">Response</a>\n</li>\n</ul>\n<section id=\"tabpanel_p0WG6wXVnG-2_tabid-5\" role=\"tabpanel\" data-tab=\"tabid-5\">\n<pre sourcefile=\"http-api/stream-metadata.md\" sourcestartlinenumber=\"53\" sourceendlinenumber=\"53\"><code class=\"lang-bash\" name=\"http-api-missing-credentials-request\">curl -i -H &quot;Accept:application/vnd.eventstore.atom+json&quot; http://127.0.0.1:2113/streams/%24userss\n</code></pre></section>\n<section id=\"tabpanel_p0WG6wXVnG-2_tabid-6\" role=\"tabpanel\" data-tab=\"tabid-6\" aria-hidden=\"true\" hidden=\"hidden\">\n<pre sourcefile=\"http-api/stream-metadata.md\" sourcestartlinenumber=\"57\" sourceendlinenumber=\"57\"><code class=\"lang-json\" name=\"http-api-missing-credentials-response\">HTTP/1.1 401 Unauthorized\nAccess-Control-Allow-Methods: GET, POST, GET, OPTIONS\nAccess-Control-Allow-Headers: Content-Type, X-Requested-With, X-Forwarded-Host, X-Forwarded-Prefix, X-PINGOTHER, Authorization, ES-LongPoll, ES-ExpectedVersion, ES-EventId, ES-EventType, ES-RequiresMaster, ES-HardDelete, ES-ResolveLinkTos\nAccess-Control-Allow-Origin: *\nAccess-Control-Expose-Headers: Location, ES-Position, ES-CurrentVersion\nWWW-Authenticate: Basic realm=&quot;ES&quot;\nContent-Type: text/plain; charset=utf-8\nServer: Mono-HTTPAPI/1.0\nDate: Thu, 23 Aug 2018 10:26:52 GMT\nContent-Length: 0\nKeep-Alive: timeout=15,max=100\n</code></pre></section>\n</div>\n<h2 id=\"writing-metadata\" sourcefile=\"http-api/stream-metadata.md\" sourcestartlinenumber=\"61\" sourceendlinenumber=\"61\">Writing Metadata</h2>\n<p sourcefile=\"http-api/stream-metadata.md\" sourcestartlinenumber=\"63\" sourceendlinenumber=\"63\">To update the metadata for a stream, issue a <code>POST</code> request to the metadata resource.</p>\n<p sourcefile=\"http-api/stream-metadata.md\" sourcestartlinenumber=\"65\" sourceendlinenumber=\"65\">Inside a file named <em>metadata.json</em>:</p>\n<pre sourcefile=\"http-api/stream-metadata.md\" sourcestartlinenumber=\"67\" sourceendlinenumber=\"67\"><code class=\"lang-json\" name=\"http-api-metadata-json\">[\n    {\n        &quot;eventId&quot;: &quot;7c314750-05e1-439f-b2eb-f5b0e019be72&quot;,\n        &quot;eventType&quot;: &quot;$user-updated&quot;,\n        &quot;data&quot;: {\n            &quot;readRole&quot;: &quot;$all&quot;,\n            &quot;metaReadRole&quot;: &quot;$all&quot;\n        }\n    }\n]\n</code></pre><p sourcefile=\"http-api/stream-metadata.md\" sourcestartlinenumber=\"69\" sourceendlinenumber=\"69\">You can also add user-specified metadata here. Some examples user-specified metadata are:</p>\n<ul sourcefile=\"http-api/stream-metadata.md\" sourcestartlinenumber=\"71\" sourceendlinenumber=\"73\">\n<li sourcefile=\"http-api/stream-metadata.md\" sourcestartlinenumber=\"71\" sourceendlinenumber=\"71\">Which adapter populates a stream.</li>\n<li sourcefile=\"http-api/stream-metadata.md\" sourcestartlinenumber=\"72\" sourceendlinenumber=\"72\">Which projection created a stream.</li>\n<li sourcefile=\"http-api/stream-metadata.md\" sourcestartlinenumber=\"73\" sourceendlinenumber=\"73\">A correlation ID to a business process.</li>\n</ul>\n<p sourcefile=\"http-api/stream-metadata.md\" sourcestartlinenumber=\"75\" sourceendlinenumber=\"75\">You then post this information is then posted to the stream:</p>\n<div class=\"tabGroup\" id=\"tabgroup_p0WG6wXVnG-3\" sourcefile=\"http-api/stream-metadata.md\" sourcestartlinenumber=\"77\" sourceendlinenumber=\"85\">\n<ul role=\"tablist\">\n<li role=\"presentation\">\n<a href=\"#tabpanel_p0WG6wXVnG-3_tabid-7\" role=\"tab\" aria-controls=\"tabpanel_p0WG6wXVnG-3_tabid-7\" data-tab=\"tabid-7\" tabindex=\"0\" aria-selected=\"true\" sourcefile=\"http-api/stream-metadata.md\" sourcestartlinenumber=\"77\" sourceendlinenumber=\"77\">Request</a>\n</li>\n<li role=\"presentation\">\n<a href=\"#tabpanel_p0WG6wXVnG-3_tabid-8\" role=\"tab\" aria-controls=\"tabpanel_p0WG6wXVnG-3_tabid-8\" data-tab=\"tabid-8\" tabindex=\"-1\" sourcefile=\"http-api/stream-metadata.md\" sourcestartlinenumber=\"81\" sourceendlinenumber=\"81\">Response</a>\n</li>\n</ul>\n<section id=\"tabpanel_p0WG6wXVnG-3_tabid-7\" role=\"tabpanel\" data-tab=\"tabid-7\">\n<pre sourcefile=\"http-api/stream-metadata.md\" sourcestartlinenumber=\"79\" sourceendlinenumber=\"79\"><code class=\"lang-bash\" name=\"http-api-update-metadata-request\">curl -i -d @metadata.json http://127.0.0.1:2113/streams/%24users/metadata --user admin:changeit -H &quot;Content-Type: application/vnd.eventstore.events+json&quot;\n</code></pre></section>\n<section id=\"tabpanel_p0WG6wXVnG-3_tabid-8\" role=\"tabpanel\" data-tab=\"tabid-8\" aria-hidden=\"true\" hidden=\"hidden\">\n<pre sourcefile=\"http-api/stream-metadata.md\" sourcestartlinenumber=\"83\" sourceendlinenumber=\"83\"><code class=\"lang-json\" name=\"http-api-update-metadata-response\">HTTP/1.1 201 Created\nAccess-Control-Allow-Methods: GET, POST, GET, OPTIONS\nAccess-Control-Allow-Headers: Content-Type, X-Requested-With, X-Forwarded-Host, X-Forwarded-Prefix, X-PINGOTHER, Authorization, ES-LongPoll, ES-ExpectedVersion, ES-EventId, ES-EventType, ES-RequiresMaster, ES-HardDelete, ES-ResolveLinkTos\nAccess-Control-Allow-Origin: *\nAccess-Control-Expose-Headers: Location, ES-Position, ES-CurrentVersion\nLocation: http://127.0.0.1:2113/streams/%24%24%24users/0\nContent-Type: text/plain; charset=utf-8\nServer: Mono-HTTPAPI/1.0\nDate: Thu, 23 Aug 2018 10:35:19 GMT\nContent-Length: 0\nKeep-Alive: timeout=15,max=100\n</code></pre></section>\n</div>\n<p sourcefile=\"http-api/stream-metadata.md\" sourcestartlinenumber=\"87\" sourceendlinenumber=\"87\">If the specified user does not have permissions to write to the stream metadata, you receive a &#39;401 Unauthorized&#39; response.</p>\n","type":"Conceptual","source":{"remote":{"path":"http-api/stream-metadata.md","branch":"feature/stats-REST","repo":"git@github.com:EventStore/docs.geteventstore.com.git"},"startLine":0.0,"endLine":0.0,"isExternal":false},"path":"http-api/stream-metadata.md","documentation":{"remote":{"path":"http-api/stream-metadata.md","branch":"feature/stats-REST","repo":"git@github.com:EventStore/docs.geteventstore.com.git"},"startLine":0.0,"endLine":0.0,"isExternal":false},"_docfxVersion":"2.43.3.0","_disableBreadcrumb":true,"_enableSearch":true,"_gitContribute":{"branch":"master"},"_appFaviconPath":"assets/favicon.ico","_appTitle":"Event Store","_appFooter":"&copy; 2019 Event Store Limited","_disableNavbar":false,"_disableToc":true,"_systemKeys":["conceptual","type","source","path","documentation","title","rawTitle","wordCount"],"title":"Stream Metadata","rawTitle":"<h1 id=\"stream-metadata\" sourcefile=\"http-api/stream-metadata.md\" sourcestartlinenumber=\"5\" sourceendlinenumber=\"5\">Stream Metadata</h1>","outputFileName":"index.html","wordCount":555.0,"_lang":"csharp","_tocPath":"toc.html","_navPath":"toc.html","_rel":"../../","_path":"http-api/stream-metadata/index.html","_key":"http-api/stream-metadata.md","_navRel":"../../toc.html","_tocRel":"../../toc.html","_navKey":"~/toc.yml","_tocKey":"~/toc.yml","__global":{"classesInSubtitle":"Classes","structsInSubtitle":"Structs","interfacesInSubtitle":"Interfaces","enumsInSubtitle":"Enums","delegatesInSubtitle":"Delegates","constructorsInSubtitle":"Constructors","fieldsInSubtitle":"Fields","propertiesInSubtitle":"Properties","methodsInSubtitle":"Methods","eventsInSubtitle":"Events","operatorsInSubtitle":"Operators","eiisInSubtitle":"Explicit Interface Implementations","functionsInSubtitle":"Functions","membersInSubtitle":"Members","improveThisDoc":"Improve this Doc","viewSource":"View Source","inheritance":"Inheritance","inheritedMembers":"Inherited Members","namespace":"Namespace","assembly":"Assembly","syntax":"Syntax","overrides":"Overrides","implements":"Implements","remarks":"Remarks","examples":"Examples","seealso":"See Also","declaration":"Declaration","parameters":"Parameters","typeParameters":"Type Parameters","type":"Type","name":"Name","description":"Description","returns":"Returns","fieldValue":"Field Value","propertyValue":"Property Value","eventType":"Event Type","exceptions":"Exceptions","condition":"Condition","extensionMethods":"Extension Methods","note":"<h5>Note</h5>","warning":"<h5>Warning</h5>","tip":"<h5>Tip</h5>","important":"<h5>Important</h5>","caution":"<h5>Caution</h5>","next":"<h5>Next Steps</h5>","_shared":{}},"docurl":"https://github.com/EventStore/docs.geteventstore.com/blob/master/http-api/stream-metadata.md/#L1"}