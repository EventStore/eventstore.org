{"conceptual":"\n<p sourcefile=\"server/database-backup.md\" sourcestartlinenumber=\"7\" sourceendlinenumber=\"7\">Backing up an Event Store database is straightforward, but relies on you carrying out the steps below in the correct order.</p>\n<h2 id=\"backing-up-a-database\" sourcefile=\"server/database-backup.md\" sourcestartlinenumber=\"9\" sourceendlinenumber=\"9\">Backing up a database</h2>\n<ol sourcefile=\"server/database-backup.md\" sourcestartlinenumber=\"11\" sourceendlinenumber=\"12\">\n<li sourcefile=\"server/database-backup.md\" sourcestartlinenumber=\"11\" sourceendlinenumber=\"11\">Copy all <em>*.chk</em> files to your backup location.</li>\n<li sourcefile=\"server/database-backup.md\" sourcestartlinenumber=\"12\" sourceendlinenumber=\"12\">Copy the remaining files and directories to your backup location.</li>\n</ol>\n<p sourcefile=\"server/database-backup.md\" sourcestartlinenumber=\"14\" sourceendlinenumber=\"14\">For example:</p>\n<pre sourcefile=\"server/database-backup.md\" sourcestartlinenumber=\"16\" sourceendlinenumber=\"20\"><code class=\"lang-bash\">rsync -a /data/eventstore/db/*.chk /backup/eventstore/db/\nrsync -a /data/eventstore/db/index /backup/eventstore/db/\nrsync -a /data/eventstore/db/*.0* /backup/eventstore/db/\n</code></pre><h2 id=\"restoring-a-database\" sourcefile=\"server/database-backup.md\" sourcestartlinenumber=\"22\" sourceendlinenumber=\"22\">Restoring a database</h2>\n<ol sourcefile=\"server/database-backup.md\" sourcestartlinenumber=\"24\" sourceendlinenumber=\"25\">\n<li sourcefile=\"server/database-backup.md\" sourcestartlinenumber=\"24\" sourceendlinenumber=\"24\">Create a copy of <em>chaser.chk</em> and call it <em>truncate.chk</em>.</li>\n<li sourcefile=\"server/database-backup.md\" sourcestartlinenumber=\"25\" sourceendlinenumber=\"25\">Copy all files to the desired location.</li>\n</ol>\n<div class=\"NOTE\" sourcefile=\"server/database-backup.md\" sourcestartlinenumber=\"27\" sourceendlinenumber=\"27\"><h5>Note</h5><p sourcefile=\"server/database-backup.md\" sourcestartlinenumber=\"28\" sourceendlinenumber=\"28\">Many people do not rely on hot backups in a highly available cluster but instead increase their node counts to keep further copies of data.</p>\n</div>\n<h2 id=\"differential-backup\" sourcefile=\"server/database-backup.md\" sourcestartlinenumber=\"30\" sourceendlinenumber=\"30\">Differential backup</h2>\n<p sourcefile=\"server/database-backup.md\" sourcestartlinenumber=\"32\" sourceendlinenumber=\"32\">Event Store keep most data in <em>chunk files</em>, named <code>chunkX.Y</code>, where X is the chunk number, and Y is the version of that chunk file. As Event Store scavenges, it creates new versions of scavenged chunks which are interchangeable with older versions (but for the removed data).</p>\n<p sourcefile=\"server/database-backup.md\" sourcestartlinenumber=\"34\" sourceendlinenumber=\"34\">It&#39;s only necessary to keep the file whose name has the highest <code>Y</code> for each <code>X</code>, as well as the checkpoint files and the index directory (to avoid expensive index rebuilding).</p>\n<h2 id=\"other-options\" sourcefile=\"server/database-backup.md\" sourcestartlinenumber=\"36\" sourceendlinenumber=\"36\">Other Options</h2>\n<p sourcefile=\"server/database-backup.md\" sourcestartlinenumber=\"38\" sourceendlinenumber=\"38\">There are many other options available for backing up an Event Store database. For example, you can set up a durable subscription that writes all events to another storage mechanism such as a key/value or column store. These methods would require a manual set up for restoring back to a cluster group.</p>\n<p sourcefile=\"server/database-backup.md\" sourcestartlinenumber=\"40\" sourceendlinenumber=\"40\">You can expand upon this option to use a second Event Store node/cluster as a back up. This is commonly known as a primary/secondary back up scheme. The primary cluster runs and asynchronously pushes data to a second cluster as described above. The second cluster/node is available in case of disaster on the primary cluster. If you are using this strategy then we recommend you only support manual failover from Primary to Secondary as automated strategies risk causing a <a href=\"http://en.wikipedia.org/wiki/Split-brain_%28computing%29\" data-raw-source=\"[split brain](http://en.wikipedia.org/wiki/Split-brain_%28computing%29)\" sourcefile=\"server/database-backup.md\" sourcestartlinenumber=\"40\" sourceendlinenumber=\"40\">split brain</a> problem.</p>\n","type":"Conceptual","source":{"remote":{"path":"server/database-backup.md","branch":"feature/stats-REST","repo":"git@github.com:EventStore/docs.geteventstore.com.git"},"startLine":0.0,"endLine":0.0,"isExternal":false},"path":"server/database-backup.md","documentation":{"remote":{"path":"server/database-backup.md","branch":"feature/stats-REST","repo":"git@github.com:EventStore/docs.geteventstore.com.git"},"startLine":0.0,"endLine":0.0,"isExternal":false},"_docfxVersion":"2.43.3.0","_disableBreadcrumb":true,"_enableSearch":true,"_gitContribute":{"branch":"master"},"_appFaviconPath":"assets/favicon.ico","_appTitle":"Event Store","_appFooter":"&copy; 2019 Event Store Limited","_disableNavbar":false,"_disableToc":true,"_systemKeys":["conceptual","type","source","path","documentation","title","rawTitle","wordCount"],"title":"Database Backup","rawTitle":"<h1 id=\"database-backup\" sourcefile=\"server/database-backup.md\" sourcestartlinenumber=\"5\" sourceendlinenumber=\"5\">Database Backup</h1>","outputFileName":"index.html","wordCount":318.0,"_lang":"csharp","_tocPath":"toc.html","_navPath":"toc.html","_rel":"../../","_path":"server/database-backup/index.html","_key":"server/database-backup.md","_navRel":"../../toc.html","_tocRel":"../../toc.html","_navKey":"~/toc.yml","_tocKey":"~/toc.yml","__global":{"classesInSubtitle":"Classes","structsInSubtitle":"Structs","interfacesInSubtitle":"Interfaces","enumsInSubtitle":"Enums","delegatesInSubtitle":"Delegates","constructorsInSubtitle":"Constructors","fieldsInSubtitle":"Fields","propertiesInSubtitle":"Properties","methodsInSubtitle":"Methods","eventsInSubtitle":"Events","operatorsInSubtitle":"Operators","eiisInSubtitle":"Explicit Interface Implementations","functionsInSubtitle":"Functions","membersInSubtitle":"Members","improveThisDoc":"Improve this Doc","viewSource":"View Source","inheritance":"Inheritance","inheritedMembers":"Inherited Members","namespace":"Namespace","assembly":"Assembly","syntax":"Syntax","overrides":"Overrides","implements":"Implements","remarks":"Remarks","examples":"Examples","seealso":"See Also","declaration":"Declaration","parameters":"Parameters","typeParameters":"Type Parameters","type":"Type","name":"Name","description":"Description","returns":"Returns","fieldValue":"Field Value","propertyValue":"Property Value","eventType":"Event Type","exceptions":"Exceptions","condition":"Condition","extensionMethods":"Extension Methods","note":"<h5>Note</h5>","warning":"<h5>Warning</h5>","tip":"<h5>Tip</h5>","important":"<h5>Important</h5>","caution":"<h5>Caution</h5>","next":"<h5>Next Steps</h5>","_shared":{}},"docurl":"https://github.com/EventStore/docs.geteventstore.com/blob/master/server/database-backup.md/#L1"}