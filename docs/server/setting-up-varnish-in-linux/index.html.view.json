{"conceptual":"\n<div class=\"NOTE\" sourcefile=\"server/setting-up-varnish-in-linux.md\" sourcestartlinenumber=\"7\" sourceendlinenumber=\"7\"><h5>Note</h5><p sourcefile=\"server/setting-up-varnish-in-linux.md\" sourcestartlinenumber=\"8\" sourceendlinenumber=\"8\">This guide uses the latest Ubuntu LTS (18.04)</p>\n</div>\n<p sourcefile=\"server/setting-up-varnish-in-linux.md\" sourcestartlinenumber=\"10\" sourceendlinenumber=\"10\">You use a reverse proxy to limit access to Event Store without breaking HTTP caching (authenticate to the proxy not to Event Store itself). Since Event Store runs HTTP only on the loopback adapter, users must enter through the reverse proxy to reach Event Store. This document provides a brief guide on how to install Event Store with the varnish reverse proxy in a Linux environment. For more information on how to properly configure varnish for your requirements, read the <a href=\"https://www.varnish-cache.org/trac/wiki/Introduction\" data-raw-source=\"[Varnish documentation](https://www.varnish-cache.org/trac/wiki/Introduction)\" sourcefile=\"server/setting-up-varnish-in-linux.md\" sourcestartlinenumber=\"10\" sourceendlinenumber=\"10\">Varnish documentation</a>.</p>\n<p sourcefile=\"server/setting-up-varnish-in-linux.md\" sourcestartlinenumber=\"12\" sourceendlinenumber=\"12\"><a href=\"https://gist.github.com/benclark/2695148\" data-raw-source=\"[Ben Clark&#39;s Gist](https://gist.github.com/benclark/2695148)\" sourcefile=\"server/setting-up-varnish-in-linux.md\" sourcestartlinenumber=\"12\" sourceendlinenumber=\"12\">Ben Clark&#39;s Gist</a> contains a varnish configuration that includes basic authentication as well as some other niceties such as adding headers for hits/misses.</p>\n<h2 id=\"install-varnish\" sourcefile=\"server/setting-up-varnish-in-linux.md\" sourcestartlinenumber=\"14\" sourceendlinenumber=\"14\">Install Varnish</h2>\n<pre sourcefile=\"server/setting-up-varnish-in-linux.md\" sourcestartlinenumber=\"16\" sourceendlinenumber=\"19\"><code class=\"lang-bash\">sudo apt-get update\nsudo apt-get install varnish\n</code></pre><h2 id=\"configure-varnish\" sourcefile=\"server/setting-up-varnish-in-linux.md\" sourcestartlinenumber=\"21\" sourceendlinenumber=\"21\">Configure Varnish</h2>\n<p sourcefile=\"server/setting-up-varnish-in-linux.md\" sourcestartlinenumber=\"23\" sourceendlinenumber=\"23\">Open <em>/etc/default/varnish</em> and edit the section that looks like the below to the port with the port you want to run on:</p>\n<pre sourcefile=\"server/setting-up-varnish-in-linux.md\" sourcestartlinenumber=\"25\" sourceendlinenumber=\"31\"><code class=\"lang-bash\">DAEMON_OPTS=&quot;-a :80 \\\n             -T localhost:6082 \\\n             -f /etc/varnish/default.vcl \\\n             -S /etc/varnish/secret \\\n             -s malloc,256m&quot;\n</code></pre><p sourcefile=\"server/setting-up-varnish-in-linux.md\" sourcestartlinenumber=\"33\" sourceendlinenumber=\"33\">Open <em>/etc/varnish/default.vcl</em> and edit the <code>backend</code> section to match Event Store:</p>\n<pre sourcefile=\"server/setting-up-varnish-in-linux.md\" sourcestartlinenumber=\"35\" sourceendlinenumber=\"40\"><code class=\"lang-bash\">backend default {\n    .host = &quot;127.0.0.1&quot;;\n    .port = &quot;2114&quot;;\n}\n</code></pre><p sourcefile=\"server/setting-up-varnish-in-linux.md\" sourcestartlinenumber=\"42\" sourceendlinenumber=\"42\">Finally use <code>sudo service varnish restart</code> to restart varnish and Event Store should be running with a reverse proxy in front of it. If you want to check the status of varnish, use <code>varnishstat</code>.</p>\n","type":"Conceptual","source":{"remote":{"path":"server/setting-up-varnish-in-linux.md","branch":"feature/stats-REST","repo":"git@github.com:EventStore/docs.geteventstore.com.git"},"startLine":0.0,"endLine":0.0,"isExternal":false},"path":"server/setting-up-varnish-in-linux.md","documentation":{"remote":{"path":"server/setting-up-varnish-in-linux.md","branch":"feature/stats-REST","repo":"git@github.com:EventStore/docs.geteventstore.com.git"},"startLine":0.0,"endLine":0.0,"isExternal":false},"_docfxVersion":"2.43.3.0","_disableBreadcrumb":true,"_enableSearch":true,"_gitContribute":{"branch":"master"},"_appFaviconPath":"assets/favicon.ico","_appTitle":"Event Store","_appFooter":"&copy; 2019 Event Store Limited","_disableNavbar":false,"_disableToc":true,"_systemKeys":["conceptual","type","source","path","documentation","title","rawTitle","wordCount"],"title":"Setting up Varnish in Linux","rawTitle":"<h1 id=\"setting-up-varnish-in-linux\" sourcefile=\"server/setting-up-varnish-in-linux.md\" sourcestartlinenumber=\"5\" sourceendlinenumber=\"5\">Setting up Varnish in Linux</h1>","outputFileName":"index.html","wordCount":216.0,"_lang":"csharp","_tocPath":"toc.html","_navPath":"toc.html","_rel":"../../","_path":"server/setting-up-varnish-in-linux/index.html","_key":"server/setting-up-varnish-in-linux.md","_navRel":"../../toc.html","_tocRel":"../../toc.html","_navKey":"~/toc.yml","_tocKey":"~/toc.yml","__global":{"classesInSubtitle":"Classes","structsInSubtitle":"Structs","interfacesInSubtitle":"Interfaces","enumsInSubtitle":"Enums","delegatesInSubtitle":"Delegates","constructorsInSubtitle":"Constructors","fieldsInSubtitle":"Fields","propertiesInSubtitle":"Properties","methodsInSubtitle":"Methods","eventsInSubtitle":"Events","operatorsInSubtitle":"Operators","eiisInSubtitle":"Explicit Interface Implementations","functionsInSubtitle":"Functions","membersInSubtitle":"Members","improveThisDoc":"Improve this Doc","viewSource":"View Source","inheritance":"Inheritance","inheritedMembers":"Inherited Members","namespace":"Namespace","assembly":"Assembly","syntax":"Syntax","overrides":"Overrides","implements":"Implements","remarks":"Remarks","examples":"Examples","seealso":"See Also","declaration":"Declaration","parameters":"Parameters","typeParameters":"Type Parameters","type":"Type","name":"Name","description":"Description","returns":"Returns","fieldValue":"Field Value","propertyValue":"Property Value","eventType":"Event Type","exceptions":"Exceptions","condition":"Condition","extensionMethods":"Extension Methods","note":"<h5>Note</h5>","warning":"<h5>Warning</h5>","tip":"<h5>Tip</h5>","important":"<h5>Important</h5>","caution":"<h5>Caution</h5>","next":"<h5>Next Steps</h5>","_shared":{}},"docurl":"https://github.com/EventStore/docs.geteventstore.com/blob/master/server/setting-up-varnish-in-linux.md/#L1"}